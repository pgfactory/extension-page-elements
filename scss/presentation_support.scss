/*
**  SlideShow Support Styles
**
**  'withhold'      -> for use in source
**  'pfy-withheld'  -> used by scripts
*/

$height: var(--pfy-presi-height, 66vw);
$headerHeight: 7vmin;
$mainHeight: calc( #{$height} - #{$headerHeight} );
$sectionPaddingBottom: 1rem; //2rem;
$sectionHeight: calc(#{$mainHeight} - 1rem);


// Header:
$headerTextColor: var(--pfy-presi-header-txt-color, black);
$headerBgColor:   var(--pfy-presi-header-bg-color, #eee);

// Body:
$bodyTextColor: var(--pfy-presi-body-txt-color, black);
$bodyBgColor:   var(--pfy-presi-body-bg-color, white);

.pfy-presentation-support:not(.pfy-small-screen) {
// === Debug ====================
//  &.debug {
//    .pfy-page {
//      border: 1px dashed red;
//    }
//    .pfy-main {
//      border: 1px dotted yellow;
//    }
//    .pfy-presentation-section {
//      border: 2px dotted cyan;
//    }
//  }

  .web-mode-only {
    display: none;
  }
  .pfy-presentation-only {
    display: unset!important;
  }

  // body:
  position: absolute;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: black;
  overflow: hidden;
  --pfy-nav-bg-color: $headerBgColor;

  .pfy-page {
    height: $height;
    max-height: 100vh;
    padding: 0;
    margin: 0;
    position: relative;
    overflow: hidden;
  }

  .pfy-header-wrapper {
    color:      $headerTextColor;
    background: $headerBgColor;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: $headerHeight;
    padding: 1rem 2rem;
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    z-index: 1;
  }

  #pfy-primary-nav {
    ol {
      white-space: nowrap;
    }
  }


  .pfy-main-wrapper {
    margin-top: $headerHeight;
    height:     $mainHeight;
  }

  .pfy-main {
    position: relative;
    overflow: auto;
    height: $sectionHeight;
    max-height: calc( 100vh - #{$headerHeight} - #{$sectionPaddingBottom} );

    color:      $bodyTextColor;
    background: $bodyBgColor;
  }


  // === presentation section ============================
  .pfy-presentation-section {
    position: absolute;
    padding: 1rem 3vmin 0 5vmin;
    width: 100%;
    height: -webkit-fill-available;
    display: none;
    opacity: 0;
    transition: opacity 0.3s;
    &.pfy-elem-visible {
      display: block!important;
      opacity: 1!important;
      transition: opacity 0.3s;
    }
    > .pfy-section-inner {
      height: 100%;
      display: flex;
      flex-direction: column;
    }
  } // .pfy-presentation-section


  // === layout ========================================
  .cols {
    display: flex;
    align-items: stretch;
    gap: 1rem;
    height: -webkit-fill-available;
  }
  .col {
    //outline: 1px dotted red;
    outline-offset: -1px;
    height: inherit;
    width: 50%;
  }

  .pfy-slide-body {
    height: -webkit-fill-available;
    &.pfy-centered {
      display: flex;
      > div {
        margin: auto;
      }
    }
  }

  .pfy-centered {
    display: flex;
    height: 100%;
    > div {
      margin: auto;
    }
  }


  // === flex layout ====================================
  .pfy-flex-vertically {
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  .pfy-flex-horizontally {
    overflow: hidden;
    display: flex;
  }

  .pfy-flex-centered {
    justify-content: center;
//    align-items: center; // -> killt Hoehenbegrenzung des Img...
  }
  .pfy-flex-right {
    justify-content: flex-end;
  }

  // === Images ===============================
  .pfy-img-wrapper {
    max-width: 100%;
    max-height: 100%;
    img {
      max-width: inherit;
      max-height: inherit;
    }
  }


  .pfy-figure {
    height: calc(100% - var(--pfy-caption-font-size, 1rem) - 0.7rem);
    //height: calc(100% - 1.7rem);
    figcaption {
      font-size: var(--pfy-caption-font-size, 1rem);
    }
  }


  //.pfy-img-wrapper {
  //  //width: fit-content;
  //  //height: fit-content;
  //  //max-width: 100%;
  //  //max-height: 100%;
  //  //margin: auto auto;
  //  figcaption {
  //    font-size: 1rem;
  //    display: block;
  //  }
  //  img {
  //    max-width: fit-content;
  //    max-height: 100%;
  //  }
  //}
  //figure.pfy-img-wrapper {
  //  img {
  //    max-width: fit-content;
  //    max-height: calc(100% - 1rem);
  //  }
  //}




  // === cursor -> hide after timeout ========
  &.pfy-hide-cursor .pfy-presentation-section {
    cursor: none;
  }

  // === currently active section: ===========
  &#pfy .pfy-section-wrapper.pfy-elem-visible {
    // hide withheld elements:
    .withhold,
    .pfy-withheld {
      position: relative;
      opacity: 0.3;
      filter: blur(5px) brightness(0.7);

      &.pfy-elem-visible {
        opacity: 1;
        filter: unset;
        transition: opacity 0.3s;
        //z-index: 1;
      }

    } // withhold

    .invisibly-withheld {
      .withhold,
      .pfy-withheld {
        opacity: 0;
      }
    }


  } // section


  // === Content Styling =======================
  h1 {
    margin: 0 0 0.25em;
  }
  h2, h3, h4 {
    margin: 1em 0 0.2em;
  }
  p {
    max-width: 100%;
  }
  ol, ul {
    margin: 0 0 0.5em 0;
    padding-inline-start: 2em;
    li {
      margin: 0.2em 0 0.5em 0;
    }
    p {
      line-height: 1.15em;
    }
  }
  //.pfy-img {
  //  max-width: 90%;
  //}

  .hl {
    color: red;
  }
  //pre code,
  //pre,
  //code {
  //  color: navy;
  //}
  //samp {
  //  background: unset;
  //}


  // === Screen Off '.'========================
  transition: background 0.3s, blur 0.3s, brightness 0.3s;
  &.pfy-screen-off {
    background: #444;
    filter: blur(15px) brightness(0.2);
    transition: background 0.3s, blur 0.3s, brightness 0.3s;
  }

  // === Option/Alt key pressed -> allow selecting text:
  &:not(.pfy-selectable) {
    user-select: none;
  }



  // === page numbers ===============
  #page-nr-wrapper {
    position: absolute;
    bottom: 0.25em;
    right: 0.25em;
    font-size: 1.2vmin;
    color:      $bodyTextColor;
  }
  #page-nr-wrapper {
    #pfy-slide-nr::before {
      content: ".";
    }
  }

  // === Content to hide during presentation: ====
  .pfy-footer,
  &#pfy-log {
    display: none;
  }




  // === page switcher ===============
  .pfy-page-switcher-wrapper {
    font-size: 3vmin;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    margin: 0;
    height: 1px;
    > div {
      opacity: 0;
      &:hover {
        opacity: 1;
      }
    }
    .pfy-page-switcher-links {
      z-index: 9;
    }

    .pfy-page-switcher-link-text {
      display: none;
    }
    a {
      border-bottom: none;
      color: #444;
      background: white;
      width: 2vmin;
      line-height: 5vmin;
      display: inline-block;
    }
    .pfy-next-page-link a {
      text-align: right;
    }

  } // pfy-page-switcher-wrapper


  /* === Cursor ===================== */
  #pfy-cursor-click-highlighter {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    box-shadow: 0 0 0 1px #fff, 0 0 0 5px #FF0000, 0 0 0 6px #000;
    position: absolute;
    top: 50%;
    left: 50%;
    z-index: 999;
    //cursor: url(../rsc/red-arrow.png), auto;
  }


  @keyframes pfy-wobble-cursor {
    0% {
      opacity: 1;
      transform: scale(1.0, 1.0);
    }
    5% {
      transform: scale(1.3, 1.3);
    }
    10% {
      transform: scale(0.9, 0.9);
    }
    15% {
      transform: scale(1.1, 1.1);
    }
    20% {
      transform: scale(1.0, 1.0);
    }
    50% {
    }
    100% {
      opacity: 0;
    }
  }

  .pfy-wobble-cursor {
    -webkit-animation-name: pfy-wobble-cursor;
    animation-name: pfy-wobble-cursor;
    animation-duration: 2s;
  }

} // .pfy-presentation-support




@media print {
  .pfy-presentation-support {
    .pfy-next-prev-page-links,
    .invisible,
    .skiplinks,
    .pfy-skiplinks,
    .speaker-notes,
    .pfy-speaker-notes {
      display: none;
    }
    &#pfy .pfy-presentation-section {
      display: block;
    }

    body .page .pfy-pagenumber {
      font-size: 10pt;
    }

    .withhold,
    .pfy-withheld {
      color: black;
      opacity: 1 !important;
      display: initial;
    }
  }
}



